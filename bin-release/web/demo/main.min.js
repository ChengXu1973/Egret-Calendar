var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,n){function i(i){e.call(n,i,t)}if(RES.hasRes(t)){var o=RES.getRes(t);o?i(o):RES.getResAsync(t,i,this)}else RES.getResByUrl(t,i,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Calendar=function(t){function e(){var e=t.call(this)||this;return e.skinName="/resource/game-skin/CalendarSkin.exml",e.addEventListener(egret.Event.COMPLETE,e.uiComplete,e),e}return __extends(e,t),e.prototype.uiComplete=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.uiComplete,this),this.initUI(),this.initListener(),this.initSetting()},e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.getSelectedDate=function(){return 0},e.prototype.setPosition=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=950),n=n||950,n=Math.max(n,600),this.x=t,this.y=e,this.scaleX=n/950,this.scaleY=n/950},e.prototype.initUI=function(){for(var t=0;5>=t;t++)for(var e=0;6>=e;e++)this["date_"+t+"_"+e].getChildByName("bgd").visible=!1;this.groupFrame.visible=!1,this.bgdToday.visible=!1},e.prototype.initSetting=function(){this.currentYear=(new Date).getFullYear(),this.currentMonth=(new Date).getMonth(),this.currentDay=(new Date).getDate(),this.shownYear=this.currentYear,this.shownMonth=this.currentMonth},Object.defineProperty(e.prototype,"shownMonth",{get:function(){return this._shownMonth},set:function(t){t=(t+12)%12,this._shownMonth=t,this.setCalendar()},enumerable:!0,configurable:!0}),e.prototype.initListener=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.handleTap,this),this.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.handleMouse,this),this.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.handleMouse,this)},e.prototype.handleTap=function(t){switch(t.target){case this.btnCurrentTime:break;case this.btnNext:this.goNextMonth();break;case this.btnPrevious:this.goPreviousMonth();break;default:if(t.target.name&&t.target.name.indexOf("date_")>-1){this.groupFrame.visible=!0,this.groupFrame.x=t.target.x,this.groupFrame.y=t.target.y+115,this.selectedDate=this.getTimeByName(t.target.name);var e=new Date(this.selectedDate).getMonth();if(0==this.shownMonth&&11==e)return void this.goPreviousMonth();if(11==this.shownMonth&&0==e)return void this.goNextMonth();if(this.shownMonth>e)return void this.goPreviousMonth();if(this.shownMonth<e)return void this.goNextMonth()}}},e.prototype.goNextMonth=function(){11==this.shownMonth&&this.shownYear++,this.shownMonth=this.shownMonth+1},e.prototype.goPreviousMonth=function(){0==this.shownMonth&&this.shownYear--,this.shownMonth=this.shownMonth-1},e.prototype.handleMouse=function(t){var e=t.target.name;if(e&&e.indexOf("date_")>-1){var n=t.target.getChildByName("bgd");n.visible=t.type==mouse.MouseEvent.MOUSE_OVER}},e.prototype.setCalendar=function(){this.groupFrame.visible=!1,this.bgdToday.visible=!1;var t,e;t=[1,3,5,7,8,10,12].indexOf(this.shownMonth+1)>-1?31:30,e=[1,3,5,7,8,10,12].indexOf((this.shownMonth-1)%12+1)>-1?31:30,1==this.shownMonth&&(t=this.isLeapYear(this.shownYear)?29:28),2==this.shownMonth&&(e=this.isLeapYear(this.shownYear)?29:28);var n=new Date(this.shownYear,this.shownMonth,1).getDay();n=0==n?7:n;for(var i=0;6>i;i++)for(var o=0;7>o;o++){var s=this["date_"+i+"_"+o],r=s.getChildByName("txt"),h=7*i+o+1-(n-1);r.textColor=16777215,0>=h?(h+=e,r.textColor=11184810):h>t&&(h-=t,r.textColor=11184810),r.text=h+"";var a=this.getTimeByName("date_"+i+"_"+o);this.selectedDate==a&&(this.groupFrame.visible=!0,this.groupFrame.x=s.x,this.groupFrame.y=s.y+115);var u=new Date(this.currentYear,this.currentMonth,this.currentDay).getTime();u==a&&(this.bgdToday.visible=!0,this.bgdToday.x=s.x,this.bgdToday.y=s.y+115)}this.btnCurrentTime.label=this.shownYear+"/"+this.getStrOfLen2(this.shownMonth+1)},e.prototype.getTimeByName=function(t){var e=t.split("_"),n=+e[1],i=+e[2],o=7*n+i+1,s=new Date(this.shownYear,this.shownMonth,1).getTime(),r=new Date(this.shownYear,this.shownMonth,1).getDay();r=0==r?7:r;var h=o-(r-1);return s+864e5*(h-1)},e.prototype.getStrOfLen2=function(t){return((0|t)/100).toFixed(2).slice(2)},e.prototype.isLeapYear=function(t){return!(t%(t%100?4:400))},e.prototype.dispose=function(){},e}(eui.Component);__reflect(Calendar.prototype,"Calendar");var Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var e=new eui.Theme("resource/default.thm.json",this.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.createScene,this)},e.prototype.createScene=function(){mouse.enable(this.stage);var t=new Calendar;t.setPosition(50,100,1e3),this.stage.addChild(t)},e}(eui.UILayer);__reflect(Main.prototype,"Main");var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,n,i){function o(t){e.call(i,t)}function s(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),n.call(i))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),RES.getResByUrl(t,o,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);